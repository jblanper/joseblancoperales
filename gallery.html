<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="favicon.ico" type="image/x-icon" />    
  <title>Jose Blanco Perales</title>
  <link rel="stylesheet" href="style.css" type="text/css">
</head>
<body>
  <header>
    <a id="logo-link" href="./index.html">
    <!-- Begin logo -->
    <svg width="80" height="100" version="1.1" viewBox="0 0 13.229166 13.229167" xmlns="http://www.w3.org/2000/svg"><g id="logo-body" fill="#800000"><path d="m6.6152 0.023438c-3.6369 0-6.5918 2.9548-6.5918 6.5918 0 3.6369 2.9548 6.5898 6.5918 6.5898 3.6369 0 6.5898-2.9529 6.5898-6.5898 0-3.6369-2.9529-6.5918-6.5898-6.5918zm0 0.50781c3.363 0 6.084 2.721 6.084 6.084s-2.721 6.084-6.084 6.084-6.084-2.721-6.084-6.084 2.721-6.084 6.084-6.084z" color="#000000" color-rendering="auto" dominant-baseline="auto" image-rendering="auto" shape-rendering="auto" solid-color="#000000" style="font-feature-settings:normal;font-variant-alternates:normal;font-variant-caps:normal;font-variant-ligatures:normal;font-variant-numeric:normal;font-variant-position:normal;isolation:auto;mix-blend-mode:normal;paint-order:normal;shape-padding:0;text-decoration-color:#000000;text-decoration-line:none;text-decoration-style:solid;text-indent:0;text-orientation:mixed;text-transform:none;white-space:normal"/><g transform="translate(-.19844 .19844)"><path d="m8.1166 5.4546v5.6823c1.5655-0.0045 2.8332-1.2747 2.8332-2.8411 0-1.5665-1.2678-2.8369-2.8332-2.8411z"/><path d="m8.1204 1.6954v3.2544c0.89579-0.00377 1.6209-0.7306 1.6209-1.6272 0-0.89658-0.72514-1.6238-1.6209-1.6272z"/><path d="m5.8204 1.6958v6.996a0.81365 0.81365 0 0 1 -0.8137 0.8137 0.81365 0.81365 0 0 1 -0.8137 -0.8137l-1.5168 0.72437a2.4409 2.4409 0 0 0 2.3305 1.7167 2.4409 2.4409 0 0 0 2.4411 -2.4411v-6.996z" style="paint-order:normal"/></g></g></svg>
    <!-- End logo -->
    </a>
  </header>

  <nav>
    <ul class="menu">
      <li><a href="./gallery.html" class="active">Gallery</a></li>
      <li><a href="./projects.html">Projects</a></li>
      <li><a href="./about.html">About</a></li>
    </ul>
  </nav>

  <main>

    <ul id="gallery-menu" class="menu reading-width">
      <li><a href="#musings" class="active">Musings</a></li>
      <li> / </li>
      <li><a href="#floroids">Floroids</a></li>
    </ul>

    <section class="gallery" id="musings">
      <p>The following images have been created with javascript in the browser. For now, the code is not publicly available.</p>
    </section>

    <section class="gallery hide fade-out" id="floroids">
      <p>The following images have been created with my web app <a href="floroids.joseblancoperales.com">Floroids</a>. For more information, visit the <a href="./projects.html">Projects</a> section.</p>
    </section>

  </main>

  <footer>
    <hr>
    <p>© 2019 José Blanco Perales All Rights Reserved</p>
  </footer>
  <script>
// variables
var imgData = {
  musings: ["bread9.png", "chorizo8.png", "cloth5.png", "cloth11.png",
    "egg5.png", "egg8.png", "egg9.png", "egg10.png", "envelope1.png",
    "envelope3.png", "legs.png", "mesh1.png", "mesh3.png", "mesh11.png",
    "mesh13.png", "sandwich.png", "sandwich1.png", "stomach5.png",
    "stomach9.png", "tree.png", "waffle1.png", "waffle7.png"],
  floroids: ["floroid2.png", "floroid4.png", "floroid5.png",
    "floroid6.png", "floroid7.png", "floroid8.png", "floroid9.png",
    "floroid10.png", "floroid11.png", "floroid12.png", "floroid13.png",
    "floroid14.png", "floroid15.png",]
};

// functions
function createThumbnails (galleryId) {
  var galleryKey = galleryId.slice(1);
  var activeGallery = document.querySelector(galleryId);

  imgData[galleryKey].forEach(filename => {
    var image = document.createElement('img');
    image.classList.add('thumbnail');
    image.src = 'imgs/' + galleryKey + '/thumbnails/' + filename;
    image.alt = filename.split('.')[0]

    activeGallery.appendChild(image);

    // binding for zooming
    image.addEventListener('click', createBigImage);
  });
}

function createBigImage (event) {
  // create and add overlay
  var overlay = document.createElement('div');
  overlay.classList.add('overlay');
  document.body.appendChild(overlay);

  // create and add big-image
  var bigImage = document.createElement('img');
  bigImage.classList.add('big-image');
  bigImage.src = event.target.src.replace('thumbnails', 'normal');
  document.body.appendChild(bigImage);

  // click on image to remove it
  bigImage.addEventListener('click', removeBigImage);
  overlay.addEventListener('click', removeBigImage);
}

function removeBigImage (event) {
  // remove overlay and big-image
  var overlay = document.querySelector('.overlay');
  document.body.removeChild(overlay);

  var bigImage = document.querySelector('.big-image');
  document.body.removeChild(bigImage);
}

function changeGallery (event) {
  var activeGalleryId = event.target.hash.slice(1);

  // prevent scrolling;
  event.preventDefault();

  // handle gallery-menu links
  document.querySelectorAll('#gallery-menu a').forEach(a => {
    if (a.hash !== event.target.hash) a.classList.remove('active');
    else a.classList.add('active');
  });

  // if gallery has already images, do not recreate them
  if (!document.querySelector(event.target.hash + ' img')) {
    createThumbnails(event.target.hash);
  }

  // handle galleriy sections
  document.querySelectorAll('.gallery').forEach(section => {
    if (section.id !== activeGalleryId) {
      // hide gallery
      section.classList.add('fade-out');
      // for animation
      window.setTimeout(_ => section.classList.add('hide'), 300);
    } else {
      // show gallery
      // for animation
      window.setTimeout(_ => section.classList.remove('hide'), 300);
      section.classList.remove('fade-out')
    }
  });
}

// general bindings
document.querySelectorAll('#gallery-menu a').forEach(a => {
  a.addEventListener('click', changeGallery);
});

document.onLoad = createThumbnails("#musings");
  </script>
</body>
</html>

